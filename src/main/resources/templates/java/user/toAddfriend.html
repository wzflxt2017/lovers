<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- 创建人：wangzefeng-->
    <!-- 创建时间：2019-10-29 13:51-->
    <th:block th:include="/common/commonStatic :: header('首页')"></th:block>
    <style>

    </style>
</head>
<body>

<div class="container-fluid" id="vue_dom">
    <div class="row text-center">
        <div class="col-md-12">
            <form role="form" class="form-inline">
                <div class="form-group">
                    <label for="userName">账号或昵称</label>
                    <input type="text" class="form-control" id="userName" />
                </div>
                <button type="button" class="btn btn-primary" onclick="searchUser()">搜索</button>
            </form>
        </div>
    </div>
    <div class="row" v-if="notEmptyArray(sysUsers)">
        <template v-for="one in sysUsers">
            <div class="col-md-4">
                <img  style="width: 120px;height: 120px;" alt="Bootstrap Media Preview" :src="getImageUrl(one.userPhoto)" />
            </div>
            <div class="col-md-8">
                <h5  v-text="one.userName"></h5>
                {{one.userBio}}
            </div>
        </template>
    </div>
</div>

<script>
    var vue=new Vue({
        el:"#vue_dom",
        data:{
            sysUsers:""
        },
        methods:{
            getImageUrl:getImageUrl,
            notEmptyArray:notEmptyArray,
            reloadVue:function(){
                this.$forceUpdate();
            }

        }
    })
    var searchUser=function () {
        var userName = $("#userName").val();
        $.ajax({
            url:"/user/center/searchUsersByNameOrAccount",
            type:"GET",
            data:{
                userName:userName
            },
            dataType:"json",
            success:function(data){
                vue.$data.sysUsers=data.data;
            }
        })
    }

</script>

</body>
</html>